<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
  <meta charset="UTF-8">
  <title>Danh Sách Bài Hát</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <style>
    /* Tùy chỉnh nhẹ cho form tìm kiếm */
    .search-form {
      max-width: 400px;
    }
  </style>
</head>
<body>
<div class="container mt-5">

  <h2 class="mb-4 text-primary">Danh Sách Bài Hát</h2>
  <h1>Sửa abc</h1>

  <div class="row mb-3 align-items-center">
    <div class="col-md-6">
      <form action="" method="get" class="d-flex search-form">
        <input type="text" class="form-control me-2" name="searchName"
               th:value="${searchName}" placeholder="Tìm kiếm theo Tên Bài Hát">
        <button class="btn btn-outline-success" type="submit">Tìm</button>
      </form>
    </div>
    <div class="col-md-6 text-end">
      <a th:href="@{/create}" class="btn btn-success">
        <i class="bi bi-plus-circle"></i> Thêm Bài Hát Mới
      </a>
    </div>
  </div>

  <hr>

  <table class="table table-striped table-hover">
    <thead class="table-dark">
    <tr>
      <th>#ID</th>

      <th>
        <a th:href="@{/(page=${songPage.number}, size=${songPage.size}, searchName=${searchName}, sort='nameSong,asc')}">Tên Bài Hát</a>
      </th>

      <th>
        <a th:href="@{/(page=${songPage.number}, size=${songPage.size}, searchName=${searchName}, sort='nameArtist,desc')}">Tên Nghệ Sĩ</a>
      </th>

      <th>Thể Loại</th>
      <th>URL Bài Hát</th>
      <th>Thao Tác</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="song : ${songPage.content}">
      <td th:text="${song.id}">1</td>
      <td th:text="${song.nameSong}">Tên Bài Hát A</td>
      <td th:text="${song.nameArtist}">Nghệ Sĩ X</td>
      <td th:text="${song.style}">Pop</td>
      <td th:text="${song.urlSong}">http://url.com/a</td>
      <td>
        <a th:href="@{/user/edit/__${song.id}__}" class="btn btn-sm btn-warning">Sửa</a>
        <button type="button" class="btn btn-sm btn-danger" data-bs-toggle="modal"
                th:data-bs-target="'#deleteModal' + ${song.id}">Xóa</button>
      </td>
    </tr>
    <tr th:if="${songPage.content.isEmpty()}">
      <td colspan="6" class="text-center text-danger">Không tìm thấy bài hát nào.</td>
    </tr>
    </tbody>
  </table>

  <div th:if="${songPage.totalPages > 0}" class="d-flex justify-content-center">
    <nav aria-label="Page navigation">
      <ul class="pagination">
        <li class="page-item" th:classappend="${songPage.first ? 'disabled' : ''}">
          <a class="page-link"
             th:href="@{/(page=${songPage.number - 1}, size=${songPage.size}, searchName=${searchName})}"
             tabindex="-1">Trước</a>
        </li>

        <li class="page-item" th:each="i : ${#numbers.sequence(0, songPage.totalPages - 1)}"
            th:classappend="${i == songPage.number ? 'active' : ''}">
          <a class="page-link"
             th:href="@{/(page=${i}, size=${songPage.size}, searchName=${searchName})}"
             th:text="${i + 1}">1</a>
        </li>

        <li class="page-item" th:classappend="${songPage.last ? 'disabled' : ''}">
          <a class="page-link"
             th:href="@{/(page=${songPage.number + 1}, size=${songPage.size}, searchName=${searchName})}"
          >Sau</a>
        </li>
      </ul>
    </nav>
  </div>

  <div class="text-center mt-3">
    <p>Hiển thị trang <span th:text="${songPage.number + 1}"></span> của <span th:text="${songPage.totalPages}"></span>.
      Tổng số bài hát: <span th:text="${songPage.totalElements}"></span></p>
  </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
</body>
</html>